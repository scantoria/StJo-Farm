<!-- Hero Banner -->
<section class="page-hero">
  <div class="hero-overlay"></div>
  <div class="hero-content">
    <h1>For Sale</h1>
    <p>Quality livestock and farm products available now</p>
  </div>
</section>

<!-- Filter and Listings Section -->
<section class="listings-section">
  <div class="container">

    <!-- Filter Bar -->
    <div class="filter-bar">
      <h2>Browse Available Items</h2>

      <div class="filters">
        <mat-form-field appearance="outline">
          <mat-label>Category</mat-label>
          <mat-select [(value)]="selectedCategory" (selectionChange)="onFilterChange()">
            <mat-option value="all">All Categories</mat-option>
            <mat-option value="dairy-cow">Dairy Cows</mat-option>
            <mat-option value="heifer">Heifers</mat-option>
            <mat-option value="steer">Steers</mat-option>
            <mat-option value="goat-wether">Wether Goats</mat-option>
            <mat-option value="goat-doe">Doe Goats</mat-option>
            <mat-option value="horse">Horses</mat-option>
            <mat-option value="eggs">Eggs</mat-option>
            <mat-option value="other">Other</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Availability</mat-label>
          <mat-select [(value)]="selectedAvailability" (selectionChange)="onFilterChange()">
            <mat-option value="all">All Items</mat-option>
            <mat-option value="available">Available Only</mat-option>
            <mat-option value="sold">Sold Items</mat-option>
          </mat-select>
        </mat-form-field>

        <button mat-raised-button class="accent" (click)="clearFilters()">
          <mat-icon>clear</mat-icon>
          Clear Filters
        </button>
      </div>
    </div>

    <!-- Loading State -->
    @if (loading()) {
      <div class="loading-container">
        <mat-spinner></mat-spinner>
        <p>Loading listings...</p>
      </div>
    }

    <!-- Listings Grid -->
    @if (!loading() && filteredListings().length > 0) {
      <div class="listings-grid">
        @for (listing of filteredListings(); track listing.id) {
          <app-listing-card
            [listing]="listing"
            [showActions]="false"
            (view)="viewListing($event)">
          </app-listing-card>
        }
      </div>
    }

    <!-- No Listings -->
    @if (!loading() && filteredListings().length === 0 && allListings().length > 0) {
      <div class="no-listings">
        <mat-icon>filter_alt_off</mat-icon>
        <h3>No items match your filters</h3>
        <p>Try adjusting your filters to see more results.</p>
        <button mat-raised-button class="primary" (click)="clearFilters()">
          Clear Filters
        </button>
      </div>
    }

    <!-- Empty State -->
    @if (!loading() && allListings().length === 0) {
      <div class="empty-state">
        <mat-icon>inventory_2</mat-icon>
        <h3>No Listings Available</h3>
        <p>We don't have any items listed for sale at the moment. Please check back soon!</p>
        <p>In the meantime, feel free to contact us about availability.</p>
        <button mat-raised-button class="secondary" routerLink="/contact">
          Contact Us
        </button>
      </div>
    }

  </div>
</section>

<!-- Info Section -->
<section class="info-section">
  <div class="container">
    <div class="info-grid">
      <div class="info-card">
        <mat-icon>info</mat-icon>
        <h3>Pricing</h3>
        <p>All prices are negotiable. Contact us to discuss pricing and availability for any item.</p>
      </div>

      <div class="info-card">
        <mat-icon>local_shipping</mat-icon>
        <h3>Pickup & Delivery</h3>
        <p>Pickup available at our farm. Delivery may be arranged for an additional fee.</p>
      </div>

      <div class="info-card">
        <mat-icon>verified</mat-icon>
        <h3>Health Guarantee</h3>
        <p>All animals are healthy and have received appropriate veterinary care.</p>
      </div>
    </div>
  </div>
</section>

<!-- Contact CTA -->
<section class="contact-cta">
  <div class="container">
    <mat-icon>mail</mat-icon>
    <h2>Interested in Purchasing?</h2>
    <p>Contact us for more information about any of our available items.</p>
    <button mat-raised-button class="primary" routerLink="/contact">
      Get In Touch
    </button>
  </div>
</section>
